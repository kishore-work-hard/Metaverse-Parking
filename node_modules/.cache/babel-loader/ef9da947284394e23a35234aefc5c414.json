{"ast":null,"code":"var _jsxFileName = \"F:\\\\elvicto\\\\REPO\\\\meta-dev\\\\minecraft-react\\\\src\\\\components\\\\Player.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from 'react';\nimport { useSphere } from '@react-three/cannon';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { FPVControls } from './FPVControls';\nimport { useKeyboardControls } from '../hooks/useKeyboardControls';\nimport { Vector3 } from 'three';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SPEED = 60;\nexport const Player = props => {\n  _s();\n\n  const {\n    camera\n  } = useThree();\n  const {\n    moveForward,\n    moveBackward,\n    moveLeft,\n    moveRight,\n    jump\n  } = useKeyboardControls();\n  const [ref, api] = useSphere(() => ({\n    mass: 1,\n    type: 'Dynamic',\n    ...props\n  }));\n  const velocity = useRef([0, 0, 0]);\n  useEffect(() => {\n    api.velocity.subscribe(v => velocity.current = v);\n  }, [api.velocity]);\n  const pos = useRef([0, 0, 0]);\n  useEffect(() => api.position.subscribe(v => pos.current = v), [api.position]);\n  useFrame(() => {\n    camera.position.copy(new Vector3(pos.current[0], pos.current[1], pos.current[2]));\n    const direction = new Vector3();\n    const frontVector = new Vector3(0, 0, (moveBackward ? 1 : 0) - (moveForward ? 1 : 0));\n    const sideVector = new Vector3((moveLeft ? 1 : 0) - (moveRight ? 1 : 0), 0, 0);\n    direction.subVectors(frontVector, sideVector).normalize().multiplyScalar(SPEED).applyEuler(camera.rotation);\n    api.velocity.set(direction.x, velocity.current[1], direction.z);\n\n    if (jump && Math.abs(velocity.current[1].toFixed(2)) < 0.05) {\n      api.velocity.set(velocity.current[0], 8, velocity.current[2]);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FPVControls, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Player, \"EU5NxZ0TsTt4wmKf8MlQ7XZRS+8=\", false, function () {\n  return [useThree, useKeyboardControls, useSphere, useFrame];\n});\n\n_c = Player;\n\nvar _c;\n\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"names":["React","useEffect","useRef","useSphere","useThree","useFrame","FPVControls","useKeyboardControls","Vector3","SPEED","Player","props","camera","moveForward","moveBackward","moveLeft","moveRight","jump","ref","api","mass","type","velocity","subscribe","v","current","pos","position","copy","direction","frontVector","sideVector","subVectors","normalize","multiplyScalar","applyEuler","rotation","set","x","z","Math","abs","toFixed"],"sources":["F:/elvicto/REPO/meta-dev/minecraft-react/src/components/Player.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { useSphere } from '@react-three/cannon';\r\nimport { useThree, useFrame } from '@react-three/fiber';\r\nimport { FPVControls } from './FPVControls';\r\nimport { useKeyboardControls } from '../hooks/useKeyboardControls';\r\nimport { Vector3 } from 'three';\r\n\r\nconst SPEED = 60;\r\n\r\nexport const Player = (props) => {\r\n  const { camera } = useThree();\r\n  const { moveForward, moveBackward, moveLeft, moveRight, jump } =\r\n    useKeyboardControls();\r\n  const [ref, api] = useSphere(() => ({\r\n    mass: 1,\r\n    type: 'Dynamic',\r\n    ...props,\r\n  }));\r\n\r\n  const velocity = useRef([0, 0, 0]);\r\n  useEffect(() => {\r\n    api.velocity.subscribe((v) => (velocity.current = v));\r\n  }, [api.velocity]);\r\n\r\n  const pos = useRef([0, 0, 0]);\r\n  useEffect(() => api.position.subscribe((v) => (pos.current = v)), [api.position]);\r\n\r\n  useFrame(() => {\r\n    camera.position.copy(\r\n      new Vector3(pos.current[0], pos.current[1], pos.current[2])\r\n    );\r\n    const direction = new Vector3();\r\n\r\n    const frontVector = new Vector3(\r\n      0,\r\n      0,\r\n      (moveBackward ? 1 : 0) - (moveForward ? 1 : 0)\r\n    );\r\n    const sideVector = new Vector3(\r\n      (moveLeft ? 1 : 0) - (moveRight ? 1 : 0),\r\n      0,\r\n      0\r\n    );\r\n\r\n    direction\r\n      .subVectors(frontVector, sideVector)\r\n      .normalize()\r\n      .multiplyScalar(SPEED)\r\n      .applyEuler(camera.rotation);\r\n\r\n    api.velocity.set(direction.x, velocity.current[1], direction.z);\r\n\r\n    if (jump && Math.abs(velocity.current[1].toFixed(2)) < 0.05) {\r\n      api.velocity.set(velocity.current[0], 8, velocity.current[2]);\r\n    }\r\n  });\r\n  return (\r\n    <>\r\n      <FPVControls />\r\n      <mesh ref={ref} />\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}